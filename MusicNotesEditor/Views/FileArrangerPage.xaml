<Page x:Class="MusicNotesEditor.Views.FileArrangerPage"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      Title="Arrange Files - Reorder PDF Pages and Images">
    <Grid Background="#FF353242">
		<!-- Copy the entire Grid content from FileArrangerWindow.xaml here -->
		<Grid.RowDefinitions>
			<RowDefinition Height="Auto"/>
			<RowDefinition Height="*"/>
			<RowDefinition Height="Auto"/>
			<RowDefinition Height="Auto"/>
		</Grid.RowDefinitions>

		<!-- Toolbar -->
		<StackPanel Grid.Row="0" Orientation="Horizontal" Margin="0,0,0,10">
			<Button x:Name="btnSelectFiles" Content="Select Files" Click="BtnSelectFiles_Click"
                    Width="100" Height="30" Margin="0,0,10,0"/>
			<Button x:Name="btnImportMusicXml" Content="Import MusicXML Directly" Click="BtnImportMusicXml_Click"
					Width="150" Height="30" Margin="0,0,10,0"/>
			<Button x:Name="btnMoveUp" Content="Move Up" Click="BtnMoveUp_Click"
                    Width="80" Height="30" Margin="0,0,10,0"/>
			<Button x:Name="btnMoveDown" Content="Move Down" Click="BtnMoveDown_Click"
                    Width="80" Height="30" Margin="0,0,10,0"/>
			<Button x:Name="btnRemove" Content="Remove" Click="BtnRemove_Click"
                    Width="80" Height="30" Margin="0,0,10,0"/>
			<Button x:Name="btnClearAll" Content="Clear All" Click="BtnClearAll_Click"
                    Width="80" Height="30"/>
			<!-- Add Back button -->
			<Button x:Name="btnBack" Content="Back to Menu" Click="BtnBack_Click"
                    Width="100" Height="30" Margin="20,0,0,0"/>
		</StackPanel>

		<!-- File List -->
		<ListView x:Name="filesListView" Grid.Row="1"
                  AllowDrop="True"
                  Background="#FF131020"
                  PreviewDragOver="FilesListView_PreviewDragOver"
                  Drop="FilesListView_Drop">
			<ListView.View>
                <GridView>
                    <GridViewColumn Header="Preview" Width="80">
						<GridViewColumn.CellTemplate>
							<DataTemplate>
								<Button Click="PreviewButton_Click"
                                        Background="Transparent"
                                        BorderThickness="0"
                                        Padding="2"
                                        ToolTip="Click to preview this file"
                                        Cursor="Hand">
									<Button.Content>
										<Image Source="{Binding Thumbnail}"
                                               Width="60"
                                               Height="45"
                                               Stretch="Uniform"
                                               HorizontalAlignment="Center"
                                               VerticalAlignment="Center"/>
									</Button.Content>
								</Button>
							</DataTemplate>
						</GridViewColumn.CellTemplate>
					</GridViewColumn>

                    <GridViewColumn Header="Order" Width="60" DisplayMemberBinding="{Binding Order}"/>
					<GridViewColumn Header="File Name" Width="200" DisplayMemberBinding="{Binding FileName}"/>
					<GridViewColumn Header="Type" Width="100" DisplayMemberBinding="{Binding FileType}"/>
					<GridViewColumn Header="Size" Width="80" DisplayMemberBinding="{Binding FileSize}"/>
					<GridViewColumn Header="Path" Width="300" DisplayMemberBinding="{Binding FilePath}"/>
				</GridView>
			</ListView.View>

			<ListView.ItemContainerStyle>
				<Style TargetType="ListViewItem">
					<EventSetter Event="PreviewMouseLeftButtonDown" Handler="ListViewItem_PreviewMouseLeftButtonDown"/>
					<EventSetter Event="PreviewMouseMove" Handler="ListViewItem_PreviewMouseMove"/>
				</Style>
			</ListView.ItemContainerStyle>
		</ListView>

		<!-- Status -->
		<TextBlock x:Name="lblFileCount" Grid.Row="2" Margin="0,10,0,5"/>

		<!-- Action Buttons -->
		<StackPanel Grid.Row="3" Orientation="Horizontal" HorizontalAlignment="Right">
			<Button x:Name="btnCancel" Content="Cancel" Click="BtnCancel_Click"
                    Width="80" Height="30" Margin="0,0,10,0"/>
			<Button x:Name="btnProcess" Content="Process" Click="BtnProcess_Click"
                    Width="80" Height="30"/>
		</StackPanel>
	</Grid>
</Page>