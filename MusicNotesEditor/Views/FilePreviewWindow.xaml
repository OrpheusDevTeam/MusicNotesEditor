<Window x:Class="MusicNotesEditor.Views.FilePreviewWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        WindowStyle="SingleBorderWindow"
        ResizeMode="CanResize"
        SizeChanged="Window_SizeChanged"
        Background="#2D2D30"
        Height="540" 
        Width="960"
        MinWidth="480"
        MinHeight="270">

    <Grid Background="#2D2D30" Margin="0">
        <Grid.RowDefinitions>
            <RowDefinition Height="32"/>
            <!-- Custom Title Bar -->
            <RowDefinition Height="*"/>
            <!-- Main Content -->
        </Grid.RowDefinitions>

        <!-- Custom Title Bar -->
        <Border Grid.Row="0" 
                Background="#2D2D30"
                BorderThickness="0"
                MouseDown="TitleBar_MouseDown">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto"/>
                    <!-- Icon -->
                    <ColumnDefinition Width="*"/>
                    <!-- Title + Drag Area -->
                    <ColumnDefinition Width="Auto"/>
                    <!-- Window Controls -->
                </Grid.ColumnDefinitions>

                <!-- App Icon -->
                <Image Grid.Column="0" 
                       Source="/Assets/logo_orpheus.png" 
                       Width="16" 
                       Height="16" 
                       Margin="10,0,0,0"
                       VerticalAlignment="Center"/>

                <!-- Window Title and Drag Area -->
                <TextBlock Grid.Column="1" 
                          Text="File Preview Viewer" 
                          VerticalAlignment="Center" 
                          Margin="10,0,0,0" 
                          Foreground="#FFFFFF" 
                          FontSize="12"
                          FontWeight="Normal"/>

                <!-- Window Controls -->
                <StackPanel Grid.Column="2" Orientation="Horizontal" Background="Transparent">
                    <!-- Minimize Button -->
                    <Button x:Name="MinimizeBtn" 
                            Content="‒"
                            Width="35"
                            Height="25"
                            Click="MinimizeButton_Click"
                            ToolTip="Minimize"
                            Background="Transparent"
                            BorderThickness="0"
                            Foreground="#FFFFFF"
                            FontSize="10">
                        <Button.Style>
                            <Style TargetType="Button">
                                <Setter Property="Background" Value="Transparent"/>
                                <Setter Property="BorderThickness" Value="0"/>
                                <Setter Property="Foreground" Value="#FFFFFF"/>
                                <Style.Triggers>
                                    <Trigger Property="IsMouseOver" Value="True">
                                        <Setter Property="Background" Value="#3E3E42"/>
                                    </Trigger>
                                    <Trigger Property="IsPressed" Value="True">
                                        <Setter Property="Background" Value="#007ACC"/>
                                    </Trigger>
                                </Style.Triggers>
                            </Style>
                        </Button.Style>
                    </Button>

                    <!-- Maximize Button -->
                    <Button x:Name="MaximizeBtn" 
                            Content="❐"
                            Width="35"
                            Height="25"
                            Click="MaximizeButton_Click"
                            ToolTip="Maximize"
                            Background="Transparent"
                            BorderThickness="0"
                            Foreground="#FFFFFF"
                            FontSize="10">
                        <Button.Style>
                            <Style TargetType="Button">
                                <Setter Property="Background" Value="Transparent"/>
                                <Setter Property="BorderThickness" Value="0"/>
                                <Setter Property="Foreground" Value="#FFFFFF"/>
                                <Style.Triggers>
                                    <Trigger Property="IsMouseOver" Value="True">
                                        <Setter Property="Background" Value="#3E3E42"/>
                                    </Trigger>
                                    <Trigger Property="IsPressed" Value="True">
                                        <Setter Property="Background" Value="#007ACC"/>
                                    </Trigger>
                                </Style.Triggers>
                            </Style>
                        </Button.Style>
                    </Button>

                    <!-- Close Button -->
                    <Button x:Name="CloseBtn" 
                            Content="✕"
                            Width="35"
                            Height="25"
                            Click="CloseButton_Click"
                            ToolTip="Close"
                            Background="Transparent"
                            BorderThickness="0"
                            Foreground="#FFFFFF"
                            FontSize="10">
                        <Button.Style>
                            <Style TargetType="Button">
                                <Setter Property="Background" Value="Transparent"/>
                                <Setter Property="BorderThickness" Value="0"/>
                                <Setter Property="Foreground" Value="#FFFFFF"/>
                                <Style.Triggers>
                                    <Trigger Property="IsMouseOver" Value="True">
                                        <Setter Property="Background" Value="#E81123"/>
                                        <Setter Property="Foreground" Value="#FFFFFF"/>
                                    </Trigger>
                                    <Trigger Property="IsPressed" Value="True">
                                        <Setter Property="Background" Value="#F1707A"/>
                                    </Trigger>
                                </Style.Triggers>
                            </Style>
                        </Button.Style>
                    </Button>
                </StackPanel>
            </Grid>
        </Border>

        <!-- Main Content Area -->
        <Grid Grid.Row="1">
            <Grid.Background>
                <ImageBrush ImageSource="/Assets/background.png" Stretch="UniformToFill"/>
            </Grid.Background>

            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="*"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>

            <!-- Header -->
            <Border Grid.Row="0" Background="#FF4A4365" 
            BorderBrush="#FF6B5B95" BorderThickness="1"
            CornerRadius="8" Padding="15,10"
            Margin="0,0,0,10">
                <TextBlock Text="{Binding FileItem.FileName}" 
                   FontSize="16" FontWeight="Bold" 
                   Foreground="White"
                   HorizontalAlignment="Center"
                   TextTrimming="CharacterEllipsis"/>
            </Border>

            <!-- High Resolution Preview -->
            <Border Grid.Row="1" 
            BorderBrush="#FF6B5B95" 
            BorderThickness="2" 
            Background="#FF2A2438" 
            CornerRadius="8"
            HorizontalAlignment="Center" 
            VerticalAlignment="Center"
            Padding="10">
                <Image Source="{Binding HighResolutionImage}" 
               MaxWidth="700" 
               MaxHeight="500"
               Stretch="Uniform"
               HorizontalAlignment="Center"
               VerticalAlignment="Center"/>
            </Border>

            <!-- File Information -->
            <Border Grid.Row="2" 
            Background="#FF2A2438"
            BorderBrush="#FF4A4365"
            BorderThickness="1"
            CornerRadius="6"
            Padding="10,8"
            Margin="0,10,0,5">
                <TextBlock Text="{Binding FileInfo}" 
                   FontSize="12" 
                   Foreground="LightGray"
                   TextWrapping="Wrap"
                   HorizontalAlignment="Center"/>
            </Border>

            <!-- Close Button -->
            <Button Grid.Row="3" 
            Content="Close" 
            Width="100" 
            Height="35" 
            HorizontalAlignment="Center"
            Margin="0,10,0,0"
            Background="#FF4A4365"
            Foreground="White"
            BorderBrush="#FF6B5B95"
            FontWeight="SemiBold"
            Click="CloseButton_Click">
                <Button.Style>
                    <Style TargetType="Button">
                        <Setter Property="Template">
                            <Setter.Value>
                                <ControlTemplate TargetType="Button">
                                    <Border Background="{TemplateBinding Background}"
                                    BorderBrush="{TemplateBinding BorderBrush}"
                                    BorderThickness="{TemplateBinding BorderThickness}"
                                    CornerRadius="6">
                                        <ContentPresenter HorizontalAlignment="Center" 
                                                  VerticalAlignment="Center"
                                                  Margin="{TemplateBinding Padding}"/>
                                    </Border>
                                </ControlTemplate>
                            </Setter.Value>
                        </Setter>
                        <Style.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter Property="Background" Value="#FF5A5375"/>
                                <Setter Property="BorderBrush" Value="#FF7B6BA5"/>
                            </Trigger>
                            <Trigger Property="IsPressed" Value="True">
                                <Setter Property="Background" Value="#FF6B5B95"/>
                                <Setter Property="BorderBrush" Value="#FF8B7BA5"/>
                            </Trigger>
                        </Style.Triggers>
                    </Style>
                </Button.Style>
            </Button>
        </Grid>
    </Grid>
</Window>